
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Algorithmic Process Optimization (APO) Workflow &#8212; obsidian  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/mycss.css?v=6334c041" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-BPMFV2DMZE"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-BPMFV2DMZE');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-BPMFV2DMZE');
            </script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'wiki/1_APO_Workflow_and_CodeStructure';</script>
    <link rel="icon" href="../_static/obsidian_logo.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Additional Analysis and Visualization" href="2_Analysis_and_Visualization.html" />
    <link rel="prev" title="Wiki" href="../stubs/wiki.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/obsidian_logo.svg" class="logo__image only-light" alt="obsidian - Home"/>
    <script>document.write(`<img src="../_static/obsidian_logo_dark.svg" class="logo__image only-dark" alt="obsidian - Home"/>`);</script>
  
  
    <p class="title logo__title">obsidian APO</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/MSDLLCpapers/obsidian/">
    GitHub
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../stubs/api_docs.html">
    API Documentation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../stubs/wiki.html">
    Wiki
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../stubs/tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../stubs/publications.html">
    Publications
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../stubs/reference.html">
    Reference
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/MSDLLCpapers/obsidian/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/obsidian-apo/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-python fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/MSDLLCpapers/obsidian/">
    GitHub
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../stubs/api_docs.html">
    API Documentation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../stubs/wiki.html">
    Wiki
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../stubs/tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../stubs/publications.html">
    Publications
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../stubs/reference.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/MSDLLCpapers/obsidian/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/obsidian-apo/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-python fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Algorithmic Process Optimization (APO) Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_Analysis_and_Visualization.html">Additional Analysis and Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_Data.html">Data Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_SurrogateModel.html">Surrogate Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_AcquisitionFunction.html">Acquisition Function</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../stubs/wiki.html" class="nav-link">Wiki</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Algorithmic...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="algorithmic-process-optimization-apo-workflow">
<h1>Algorithmic Process Optimization (APO) Workflow<a class="headerlink" href="#algorithmic-process-optimization-apo-workflow" title="Link to this heading">#</a></h1>
<p>APO is an iterative procedure used for optimizing complex systems with an expensive-to-evaluate objective function. The major steps involve constructing a surrogate model to approximate the objective function and defining an acquisition function based on user preference that explores and/or exploits the design space to find the optimal solution.</p>
<p>When applied to chemical process optimization, the APO algorithms can effectively identify desirable experimental conditions or parameter settings that maximize process efficiency, minimize costs, or achieve other specified objectives within given resource constraints.</p>
<p>The components typically involved in APO algorithms are illustrated in the figure below:</p>
<p><img alt="APO Workflow" src="https://github.com/MSDLLCpapers/obsidian/blob/main/docs/_static/APO_workflow.png?raw=true" /></p>
<p>In this <strong><em>obsidian</em></strong> library:</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Optimizer</span></code> class object in <a class="reference external" href="https://github.com/MSDLLCpapers/obsidian/tree/main/obsidian/optimizer">optimizer</a> submodule is the main portal that connects all the key components in the APO algorithm.</p>
<p>The <a class="reference external" href="https://github.com/MSDLLCpapers/obsidian/tree/main/obsidian/dash">dash</a> submodule contains the source code for a web GUI using the Dash library.</p>
<p>The <a class="reference external" href="https://github.com/MSDLLCpapers/obsidian/tree/main/demo">demo</a> folder contains step-by-step Jupyter notebook usage examples as well as scripts for benchmark studies.</p>
<hr class="docutils" />
<section id="data">
<h2>Data<a class="headerlink" href="#data" title="Link to this heading">#</a></h2>
<p>The data structure in a typical APO work flow includes:</p>
<ul class="simple">
<li><p><strong><span class="math notranslate nohighlight">\(X\)</span>: Experimental conditions, also called input features/parameters or independent variables.</strong> Usually a set of &lt;20 variables are chosen to investigate their effects on the experimental outcomes. Various types of variables are supported:</p>
<ul>
<li><p>Continuous variables:</p>
<ul>
<li><p>Continuous (numerical) variable: A variable that can have an infinite number of real values within a given interval (e.g. Temperature)</p></li>
<li><p>Observational (numerical) variable: A variable that can be measured but not directly controlled, which still is useful for model fitting and optimization (e.g. Reaction time)</p></li>
</ul>
</li>
<li><p>Discrete variables:</p>
<ul>
<li><p>Discrete (numerical) variable: A variable that have finite number of numerical values within a given range or list of numbers (e.g. Buffer pKa)</p></li>
<li><p>Ordinal variable: A discrete variable that is defined by a meaningful ordered relationship between different categories (e.g. Light intensity at Low, Medium, High)</p></li>
<li><p>Categorical variable: A discrete variable that describes a name, label, or category without a natural order (e.g. Catalyst name)</p></li>
<li><p>Task variable: A special categorical variable which requires that a distinct response be predicted for each task (e.g. Reactor type)</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong><span class="math notranslate nohighlight">\(X_{space}\)</span>: Experimental design space, or input parameter constraints.</strong> The multidimensional parameter space within which the experimental conditions <span class="math notranslate nohighlight">\(X\)</span> could be chosen and manipulated.</p>
<ul>
<li><p>For each continuous variable in <span class="math notranslate nohighlight">\(X\)</span>, the range of min and max range should be specified.</p></li>
<li><p>For each discrete variable, the set of possible distinct values (categories) should be provided.</p></li>
<li><p>Before fitting, all variables in <span class="math notranslate nohighlight">\(X_{space}\)</span> are transformed to an encoded, unit-cube space that is amenable to machine-learning, especially for Gaussian Processes. Each variable type has a pre-defined encoder (e.g. min-max scaling for continuous, one-hot encoding for categorical). Optimization and prediction occurs in the encoded (transformed) spsace <span class="math notranslate nohighlight">\(X_t\)</span>, but de-transformation is always applied at key steps to ensure user-interaction and analysis within the measured parameter space <span class="math notranslate nohighlight">\(X\)</span></p></li>
</ul>
</li>
<li><p><strong><span class="math notranslate nohighlight">\(Y\)</span>: Experimental outcomes, also called responses or dependent variables.</strong> It is the measured response of a response and the target variable to be optimized when no objective function is defined. Depends on the number of outcomes chosen for optimization, <span class="math notranslate nohighlight">\(Y\)</span> could be either a scalar (single-objective optimization) or a vector (multi-objective optimization). For a multi-objective optimization problem, the user can specify whether to maximize or minimize each each element in the <span class="math notranslate nohighlight">\(Y\)</span> vector. The responses <span class="math notranslate nohighlight">\(Y\)</span> are usually scaled to zero-mean and unit variance <span class="math notranslate nohighlight">\(f(Y)\)</span> with or without additional transformation before fitting.</p></li>
<li><p><strong><span class="math notranslate nohighlight">\(O(Y, X)\)</span> Objectives, or objective functions.</strong> The target value which is sought to be maximized or minimized in an optimization campaign. Objectives can be defined to convert single-output experiments to multi-output optimizations (e.g. using penalized features), and multi-output experiments can be condensed to signle-output optimizations (e.g. using scalarization or weighting).</p></li>
</ul>
<p>See section
<a class="reference internal" href="3_Data.html"><span class="std std-doc">Data</span></a>
and submodule
<a class="reference external" href="https://github.com/MSDLLCpapers/obsidian/tree/main/obsidian/parameters"><code class="docutils literal notranslate"><span class="pre">parameters</span></code></a>,
and submodule
<a class="reference external" href="https://github.com/MSDLLCpapers/obsidian/tree/main/obsidian/objectives"><code class="docutils literal notranslate"><span class="pre">objectives</span></code></a>
for more details.</p>
</section>
<hr class="docutils" />
<section id="surrogate-model">
<h2>Surrogate Model<a class="headerlink" href="#surrogate-model" title="Link to this heading">#</a></h2>
<p>Assume the true relationship between the experiment outcome and input is <span class="math notranslate nohighlight">\(f(X)\)</span>, which is unknown since the random and/or systematic errors <span class="math notranslate nohighlight">\(\epsilon\)</span> always present in experiments.</p>
<p>The measured outcome could be denoted as <span class="math notranslate nohighlight">\(Y(X) = f(X) + \epsilon\)</span>. When the variance of <span class="math notranslate nohighlight">\(\epsilon\)</span> is constant, the noise is homoscedastic; otherwise when the noise is heteroscedastic, where the variance of <span class="math notranslate nohighlight">\(\epsilon\)</span> could depend on <span class="math notranslate nohighlight">\(X\)</span>, making the optimization problem more challenging.</p>
<p>The surrogate model <span class="math notranslate nohighlight">\(\hat{f}(X)\)</span> is a predictive model that approximate the underlying unknown relationship <span class="math notranslate nohighlight">\(f(X)\)</span>. The <span class="math notranslate nohighlight">\(\hat{f}(X)\)</span> has the same dimension as <span class="math notranslate nohighlight">\(Y\)</span>.
If <span class="math notranslate nohighlight">\(Y\)</span> is a vector, the experimental outcomes could be modeled jointly with multivariate multiple regression modeling methods at once; or each outcome could be modeled separately in parallel.</p>
<p>For Bayesian Optimization, surrogate models should provide both a point prediction (e.g. conditional mean given <span class="math notranslate nohighlight">\(X\)</span>) as well as a prediction uncertainty metric (e.g. conditional standard deviation given <span class="math notranslate nohighlight">\(X\)</span>). Most acquisition functions require both point prediction and uncertainty to balance the exploration and exploitation of the design space.</p>
<p>The most popular choice of surrogate model is Gaussian Process (GP) regression, which is a Bayesian model that combines prior knowledge with observed data to make probabilistic inferences of the posterior distribution. Under the assumption of Gaussian noise <span class="math notranslate nohighlight">\(\epsilon\)</span>, it is cheap to compute the posterior mean and standard deviation for each new input data. Importantly, GP models do not provide a closed-form expression of <span class="math notranslate nohighlight">\(f(X)\)</span> but rather extimate a kernel which describes the covariance between unsampled <span class="math notranslate nohighlight">\(X^*\)</span> and sampled <span class="math notranslate nohighlight">\(X\)</span> space. Notably suitable for Bayesian Optimization, these kernels typically provide an increasing estimate of uncertainty as the distance from sampled space increases.</p>
<p>The APO workflow starts with collecting a set of initial experimental data <span class="math notranslate nohighlight">\((X_0,Y_0)\)</span>, where the <span class="math notranslate nohighlight">\(X_0\)</span> could be random sampled from <span class="math notranslate nohighlight">\(X_{space}\)</span> or suggested by design-of-experiments methods. The initial surrogate model <span class="math notranslate nohighlight">\(\hat{f}_0\)</span> is then fit based on this initial dataset.
At the <span class="math notranslate nohighlight">\(i^{th}\)</span> iteration later, an updated surrogate model <span class="math notranslate nohighlight">\(\hat{f}_i\)</span> is trained on all the available data <span class="math notranslate nohighlight">\(\{X_t,Y_t\}_{1 \leq t \leq i}\)</span>. As more data are accumulated with multiple rounds of optimization, we expect the surrogate function to become more precise and better approximate the actual underlying functional relationship.</p>
<p>See section
<a class="reference internal" href="4_SurrogateModel.html"><span class="std std-doc">Surrogate Model</span></a>
and submodule
<a class="reference external" href="https://github.com/MSDLLCpapers/obsidian/tree/main/obsidian/surrogates"><code class="docutils literal notranslate"><span class="pre">surrogates</span></code></a>
for more details.</p>
</section>
<hr class="docutils" />
<section id="acquisition-function">
<h2>Acquisition Function<a class="headerlink" href="#acquisition-function" title="Link to this heading">#</a></h2>
<p>The acquisition function aims to guide the search of promising new experimental conditions with the potential to achieve improved objectives. It usually depends on the surrogate model predictions and/or measured data , which scores any point in the <span class="math notranslate nohighlight">\(X_{space}\)</span>.</p>
<p>In the <span class="math notranslate nohighlight">\(i^{th}\)</span> iteration, the acquisition function is</p>
<div class="math notranslate nohighlight">
\[    a_i(X) = a(\hat{f}_i(X), \{X_t,Y_t\}_{1 \leq t \leq i})\]</div>
<p>Maximizing this scoring function over the design space is used to produce the suggested new candidate conditions for the <span class="math notranslate nohighlight">\((i+1)^{th}\)</span> iteration:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
X_{i+1} = \underset{X' \in X_{space}}{\text{argmax }} a_i(X')
\end{equation*}\]</div>
<p>The definition of acquisition function determines the trade-off between exploration and exploitation based on user preference.</p>
<p>Exploitation means leveraging existing knowledge by selecting new conditions that lead to optimal outcomes based on surrogate model prediction. It could maximize the immediate gains when the true relationship is relatively well understood and approximated by the surrogate model.</p>
<p>Exploration involves acquiring new information by sampling from less explored regions of the design space where the prediction uncertainty is higher. It may help to better understand the problem and improve surrogate model quality, which usually leads to better long-term outcomes or reveal new possibilities in the context of global optimization.</p>
<p>See section <a class="reference internal" href="5_AcquisitionFunction.html"><span class="std std-doc">Acquisition Function</span></a>,
submodule <a class="reference external" href="https://github.com/MSDLLCpapers/obsidian/tree/main/obsidian/acquisition"><code class="docutils literal notranslate"><span class="pre">acquisition</span></code></a>,
and submodule <a class="reference external" href="https://github.com/MSDLLCpapers/obsidian/tree/main/obsidian/objectives"><code class="docutils literal notranslate"><span class="pre">objectives</span></code></a>
for more details.</p>
</section>
<hr class="docutils" />
<section id="suggest-new-experimental-conditions">
<h2>Suggest New Experimental Conditions<a class="headerlink" href="#suggest-new-experimental-conditions" title="Link to this heading">#</a></h2>
<p>One or more new candidate experimental condition(s) are suggested based on the criteria of maximizing the acquisition function within the experimental design space. This can be done with individual sequential experiments <code class="docutils literal notranslate"><span class="pre">m_batch=1</span></code> or parallized experiments <code class="docutils literal notranslate"><span class="pre">m_batch&gt;1</span></code> which can be optimized jointly <code class="docutils literal notranslate"><span class="pre">optim_sequential=False</span></code> or sequentially using fantasy models <code class="docutils literal notranslate"><span class="pre">optim_sequential=True</span></code>. More advanced <a class="reference external" href="https://github.com/MSDLLCpapers/obsidian/tree/main/obsidian/constraints"><code class="docutils literal notranslate"><span class="pre">constraints</span></code></a> on input or output space that involves the combination or relationship of multiple input variables could be applied during the search.</p>
<p>With an accurate surrogate model and a well-designed acquisition function, the candidate point(s) which maximize the acquisition function are most likely to achieve improved experimental outcomes.</p>
<p>The optimization of acquisition function can be performed by analytical or numerical Monte-Carlo methods, depending on the complexity of acquisition functional form. The <em>obsidian</em> library relies heavily on the <em>BoTorch</em> library for MC-based Bayesian Optimization.</p>
<p>Please refer to section <strong>Tutorials</strong> for simulation studies that demonstrate the entire APO workflow as well as various visualization and analysis methods.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../stubs/wiki.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Wiki</p>
      </div>
    </a>
    <a class="right-next"
       href="2_Analysis_and_Visualization.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Additional Analysis and Visualization</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#surrogate-model">Surrogate Model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#acquisition-function">Acquisition Function</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#suggest-new-experimental-conditions">Suggest New Experimental Conditions</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/wiki/1_APO_Workflow_and_CodeStructure.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      Â© Copyright Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates. All rights reserved..
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>